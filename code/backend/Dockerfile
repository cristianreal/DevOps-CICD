FROM node:12

ARG DB_HOST
ENV DB_HOST $DB_HOST

ARG DB_USER
ENV DB_USER $DB_USER

ARG DB_PASS
ENV DB_PASS $DB_PASS

ARG DB_DATABASE
ENV DB_DATABASE $DB_DATABASE

COPY . /server

WORKDIR /server

COPY package*.json ./

EXPOSE 5000

RUN npm install && npm test

CMD [ "npm", "run", "dev" ]